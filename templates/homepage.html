{% extends 'base_layout.html' %}
{% load static %}
{% load basic-tags %}
{% block content %}

{

    <script>
        $(document).ready(function () {
            $('.sec-click').click(function () {
                var link = $(this).attr('sec-click');
                window.location = link;
            })


            updateDonorBar({{ donation_count }});

            function updateDonorBar(amount) {
                console.log(amount);
                var height = 110;
                if (amount > 120000) {
                    var mult = amount / 80000;
                    $('.goal-7').css('height', height * mult + 'px');
                    $('.goal-7-dot').addClass('off');
                    HideSpecific('.prev-goal-7');
                } else if (amount > 85000) {
                    var mult = amount / 120000;
                    $('.goal-6').css('height', height * mult + 'px');
                    $('.goal-6-dot').addClass('off');
                    HideSpecific('.prev-goal-6');
                } else if (amount > 45000) {
                    var mult = amount / 85000;
                    console.log(mult);
                    $('.goal-5').css('height', height * mult + 'px');
                    $('.goal-5-dot').addClass('off');
                    HideSpecific('.prev-goal-5');
                } else if (amount > 30000) {
                    var mult = amount / 45000;
                    console.log(mult);
                    $('.goal-4').css('height', height * mult + 'px');
                    $('.goal-4-dot').addClass('off');
                    HideSpecific('.prev-goal-4');
                } else if (amount > 15000) {
                    var mult = amount / 30000;
                    console.log(mult);
                    $('.goal-3').css('height', height * mult + 'px');
                    $('.goal-3-dot').addClass('off');
                    HideSpecific('.prev-goal-3');
                } else if (amount > 0) {
                    var mult = amount / 15000;
                    console.log(mult);
                    $('.goal-2').css('height', height * mult + 'px');
                    $('.goal-2-dot').addClass('off');
                    HideSpecific('.prev-goal-2');
                }
            }

            function HideSpecific(goal) {
                $('.prev-goal-1').css('display', 'none');
                $('.prev-goal-2').css('display', 'none');
                $('.prev-goal-3').css('display', 'none');
                $('.prev-goal-4').css('display', 'none');
                $('.prev-goal-5').css('display', 'none');
                $('.prev-goal-6').css('display', 'none');
                $('.prev-goal-7').css('display', 'none');
                $(goal).css('display', 'block')
            }
        });
    </script>


    <!-- Left Column : ( Last10Winners, Top10Rankings )-->
    <section class="col col-20 col-m-max-width m-order-2">
        {% basic_recent_winners %}
        {% basic_top_ranks %}
    </section>

    <!-- Center Column : ( TopNotify, LivePrev, RecentPrev, DesktopGoal, DesktopAppPrev, LiveHighlights )-->
    <section class="col col-60 col-m-max-width m-order-1">
        {% basic_top_notify request %}


        <!-- Tournament Live Preview -->
        {% if tournament_live != None %}
            <section class="sec live-prev glow">
                <a class="live-prev-title">LIVE <span class="prefix"><i class="icon-circle"></i></span><span
                        class="content desktop-on">{{ tournament_live.center.name }}<span
                        class="location desktop-on">({{ tournament_live.center.location }})</span></span></a>
                <span class="content mobile-on">{{ tournament_live.center.name }}<span
                        class="location">({{ tournament_live.center.location }})</span></span>
                <div class="live-prev-q2">
                    <a data="https://scratchbowling.pythonanywhere.com/support/"
                       class="share-page-direct btn btn-medium bkg-darkgreen text-white live-prev-watch-share"><i
                            class="icon-share-alt"></i></a>
                    <a class="btn btn-medium bkg-darkgreen text-white live-prev-watch">{% if tournament_live.stream %}
                        WATCH NOW{% else %}LIVE SCORES{% endif %}</a>
                </div>
                <br>
                <a class="live-prev-status std-hover">{{ tournament_live.status }}</a>
                <a class="live-prev-leader std-hover">LEADER: {{ tournament_live.leader }}<span>{{ tournament_live.score }}</span></a>
            </section>
        {% endif %}
        {% if tournament_recent %}
            <section class="sec t-recent-prev">
                <div class="image"><img class="preview" src="{{ tournament_recent.full_picture_url }}" alt="{{ tournament_recent.name }}"></div>
                <section class="content">
                    <a class="title" href="tournaments/view/{{ tournament_recent.id }}">{{ tournament_recent.name }}</a>
                    <a class="date"
                       href="tournaments/view/{{ tournament.id }}">{{ tournament_recent.datetime|date:'m/d' }}
                        - {{ tournament_recent.center.name|none_replace:"Center Unknown" }}</a>
                    <a class="description text-darkgreen"
                       href="tournaments/view/{{ tournament_recent.id }}">{{ tournament_recent.description|none_replace:"This is the default placeholder description for a tournament. If you're seeing this, it is because a description has not been set." }}</a>
                    <div class="stats">
                            <div class="player">
                                <a class="rank top-rank">1st</a>
                                <a class="name" href="/account/view/{{ tournament_recent.6.0.0 }}">Dan McDonald</a>
                            </div>
                            <div class="player">
                                <a class="rank">2nd</a>
                                <a class="name" href="/account/view/{{ tournament_recent.6.1.0 }}">Tyler Jackson</a>
                            </div>
                            <div class="player">
                                <a class="rank">3rd</a>
                                <a class="name" href="/account/view/{{ tournament_recent.6.2.0 }}">Aaron Adams</a>
                            </div>
                            <div class="player">
                                <a class="rank">4th</a>
                                <a class="name" href="/account/view/{{ tournament_recent.6.3.0 }}">Mike Johnson</a>
                            </div>
                        </div>
                    <div class="btn-bar-right more margin-bottom ">
                        <a class="btn btn-medium bkg-darkgreen text-white"
                           href="tournaments/view/{{ tournament_recent.0 }}">VIEW INFO</a>
                    </div>
                </section>
            </section>
        {% endif %}
        <div class="col-desktop">
            <section class="sec sec-half merch-prev sec-click" sec-click="{% url 'support:support' %}">
                <h2>HELP HIT OUR NEXT GOAL</h2>
                <div class="goal-prev">
                    <div class="goal-prev-slide prev-goal-1">
                        <div class="goal-prev-slide-bar">
                            <div class="goal-prev-slide-bar-circle">
                                <div class="goal-1-dot goal-prev-slide-bar-circle-inner">
                                </div>
                            </div>
                            <div class="goal-1 goal-prev-slide-bar-inner top">
                            </div>
                        </div>
                        <div class="goal-prev-slide-content">
                            <a>$0</a>
                            <h2>THE START</h2>
                            <p>SBS was born in 2012 as MSBS, the Michigan Scratch Bowling Series. Brian Regan started
                                these bowling tournaments as a competitive bowler himself and with the help of Aaron
                                Phillips </p>
                        </div>
                    </div>
                    <div class="goal-prev-slide prev-goal-2">
                        <div class="goal-prev-slide-bar">
                            <div class="goal-prev-slide-bar-circle">
                                <div class="goal-2-dot goal-prev-slide-bar-circle-inner">
                                </div>
                            </div>
                            <div class="goal-2 goal-prev-slide-bar-inner">
                            </div>
                        </div>
                        <div class="goal-prev-slide-content">
                            <a>$15,000</a>
                            <h2>WEB DEVELOPMENT</h2>
                            <p>SBS was born in 2012 as MSBS, the Michigan Scratch Bowling Series. Brian Regan started
                                these bowling tournaments as a competitive bowler himself and with the help of Aaron
                                Phillips </p>
                        </div>
                    </div>
                    <div class="goal-prev-slide prev-goal-3" style="display:block;">
                        <div class="goal-prev-slide-bar">
                            <div class="goal-prev-slide-bar-circle">
                                <div class="goal-3-dot goal-prev-slide-bar-circle-inner">
                                </div>
                            </div>
                            <div class="goal-3 goal-prev-slide-bar-inner">
                            </div>
                        </div>
                        <div class="goal-prev-slide-content">
                            <a>$30,000</a>
                            <h2>SOFTWARE DEVELOPMENT</h2>
                            <p>SBS was born in 2012 as MSBS, the Michigan Scratch Bowling Series. Brian Regan started
                                these bowling tournaments as a competitive bowler himself and with the help of Aaron
                                Phillips </p>
                        </div>
                    </div>
                    <div class="goal-prev-slide prev-goal-4">
                        <div class="goal-prev-slide-bar">
                            <div class="goal-prev-slide-bar-circle">
                                <div class="goal-4-dot goal-prev-slide-bar-circle-inner">
                                </div>
                            </div>
                            <div class="goal-4 goal-prev-slide-bar-inner ">
                            </div>
                        </div>
                        <div class="goal-prev-slide-content">
                            <a>$45,000</a>
                            <h2>MOBILE APP</h2>
                            <p>SBS was born in 2012 as MSBS, the Michigan Scratch Bowling Series. Brian Regan started
                                these bowling tournaments as a competitive bowler himself and with the help of Aaron
                                Phillips </p>
                        </div>
                    </div>
                    <div class="goal-prev-slide prev-goal-5">
                        <div class="goal-prev-slide-bar">
                            <div class="goal-prev-slide-bar-circle">
                                <div class="goal-5-dot goal-prev-slide-bar-circle-inner">
                                </div>
                            </div>
                            <div class="goal-5 goal-prev-slide-bar-inner "></div>
                        </div>
                        <div class="goal-prev-slide-content">
                            <a>$85,000</a>
                            <h2>TRAVELING VAN</h2>
                            <p>SBS was born in 2012 as MSBS, the Michigan Scratch Bowling Series. Brian Regan started
                                these bowling tournaments as a competitive bowler himself and with the help of Aaron
                                Phillips </p>
                        </div>
                    </div>
                    <div class="goal-prev-slide prev-goal-6">
                        <div class="goal-prev-slide-bar">
                            <div class="goal-prev-slide-bar-circle">
                                <div class="goal-6-dot goal-prev-slide-bar-circle-inner">
                                </div>
                            </div>
                            <div class="goal-6 goal-prev-slide-bar-inner ">
                            </div>
                        </div>
                        <div class="goal-prev-slide-content">
                            <a>$120,000</a>
                            <h2>BROADCAST EQUIPMENT</h2>
                            <p>SBS was born in 2012 as MSBS, the Michigan Scratch Bowling Series. Brian Regan started
                                these bowling tournaments as a competitive bowler himself and with the help of Aaron
                                Phillips </p>
                        </div>
                    </div>
                    <div class="goal-prev-slide prev-goal-7">
                        <div class="goal-prev-slide-bar" style="height:20px;">
                            <div class="goal-prev-slide-bar-circle">
                                <div class="goal-7-dot goal-prev-slide-bar-circle-inner">
                                </div>
                            </div>
                            <div class="goal-7 goal-prev-slide-bar-inner ">
                            </div>
                        </div>
                        <div class="goal-prev-slide-content">
                            <a>$200,000</a>
                            <h2>PAYROLL</h2>
                            <p>SBS was born in 2012 as MSBS, the Michigan Scratch Bowling Series. Brian Regan started
                                these bowling tournaments as a competitive bowler himself and with the help of Aaron
                                Phillips </p>
                        </div>
                    </div>
                </div>
            </section>
            <section class="sec sec-half app-prev">
                <h2>OUR NEW MOBILE APP</h2>
                <p>Try the BETA release of our app!<br>Now available on IOS and Android.</p>
                <a class="btn bkg-darkgreen text-white">LEARN MORE</a>
                <div class="app-prev-phone">
                    <span class="app-prev-phone-n1"><i></i> <span></span></span>
                    <span class="app-prev-phone-n2"><div></div></span>
                    <span class="app-prev-phone-n3"><div></div></span>
                    <img src="{% static 'img/SBS_Logo.png' %}" ref="Scratch Bowling Series">
                </div>
            </section>
            {% basic_stream_highlights %}
        </div>
    </section>

    <!-- Center Column Mobile : ( MobileGoal, MobileAppPrev, LiveHighlights ) -->
    <section class="col col-60 col-mobile col-m-max-width m-order-4">
        <section class="sec sec-half merch-prev sec-click" sec-click="{% url 'support:support' %}">
            <h2>HELP HIT OUR NEXT GOAL</h2>
            <div class="goal-prev">
                <div class="goal-prev-slide prev-goal-1">
                    <div class="goal-prev-slide-bar">
                        <div class="goal-prev-slide-bar-circle">
                            <div class="goal-1-dot goal-prev-slide-bar-circle-inner">
                            </div>
                        </div>
                        <div class="goal-1 goal-prev-slide-bar-inner top">
                        </div>
                    </div>
                    <div class="goal-prev-slide-content">
                        <a>$0</a>
                        <h2>THE START</h2>
                        <p>SBS was born in 2012 as MSBS, the Michigan Scratch Bowling Series. Brian Regan started these
                            bowling tournaments as a competitive bowler himself and with the help of Aaron Phillips </p>
                    </div>
                </div>
                <div class="goal-prev-slide prev-goal-2">
                    <div class="goal-prev-slide-bar">
                        <div class="goal-prev-slide-bar-circle">
                            <div class="goal-2-dot goal-prev-slide-bar-circle-inner">
                            </div>
                        </div>
                        <div class="goal-2 goal-prev-slide-bar-inner">
                        </div>
                    </div>
                    <div class="goal-prev-slide-content">
                        <a>$15,000</a>
                        <h2>WEB DEVELOPMENT</h2>
                        <p>SBS was born in 2012 as MSBS, the Michigan Scratch Bowling Series. Brian Regan started these
                            bowling tournaments as a competitive bowler himself and with the help of Aaron Phillips </p>
                    </div>
                </div>
                <div class="goal-prev-slide prev-goal-3" style="display:block;">
                    <div class="goal-prev-slide-bar">
                        <div class="goal-prev-slide-bar-circle">
                            <div class="goal-3-dot goal-prev-slide-bar-circle-inner">
                            </div>
                        </div>
                        <div class="goal-3 goal-prev-slide-bar-inner">
                        </div>
                    </div>
                    <div class="goal-prev-slide-content">
                        <a>$30,000</a>
                        <h2>SOFTWARE DEVELOPMENT</h2>
                        <p>SBS was born in 2012 as MSBS, the Michigan Scratch Bowling Series. Brian Regan started these
                            bowling tournaments as a competitive bowler himself and with the help of Aaron Phillips </p>
                    </div>
                </div>
                <div class="goal-prev-slide prev-goal-4">
                    <div class="goal-prev-slide-bar">
                        <div class="goal-prev-slide-bar-circle">
                            <div class="goal-4-dot goal-prev-slide-bar-circle-inner">
                            </div>
                        </div>
                        <div class="goal-4 goal-prev-slide-bar-inner ">
                        </div>
                    </div>
                    <div class="goal-prev-slide-content">
                        <a>$45,000</a>
                        <h2>MOBILE APP</h2>
                        <p>SBS was born in 2012 as MSBS, the Michigan Scratch Bowling Series. Brian Regan started these
                            bowling tournaments as a competitive bowler himself and with the help of Aaron Phillips </p>
                    </div>
                </div>
                <div class="goal-prev-slide prev-goal-5">
                    <div class="goal-prev-slide-bar">
                        <div class="goal-prev-slide-bar-circle">
                            <div class="goal-5-dot goal-prev-slide-bar-circle-inner">
                            </div>
                        </div>
                        <div class="goal-5 goal-prev-slide-bar-inner "></div>
                    </div>
                    <div class="goal-prev-slide-content">
                        <a>$85,000</a>
                        <h2>TRAVELING VAN</h2>
                        <p>SBS was born in 2012 as MSBS, the Michigan Scratch Bowling Series. Brian Regan started these
                            bowling tournaments as a competitive bowler himself and with the help of Aaron Phillips </p>
                    </div>
                </div>
                <div class="goal-prev-slide prev-goal-6">
                    <div class="goal-prev-slide-bar">
                        <div class="goal-prev-slide-bar-circle">
                            <div class="goal-6-dot goal-prev-slide-bar-circle-inner">
                            </div>
                        </div>
                        <div class="goal-6 goal-prev-slide-bar-inner ">
                        </div>
                    </div>
                    <div class="goal-prev-slide-content">
                        <a>$120,000</a>
                        <h2>BROADCAST EQUIPMENT</h2>
                        <p>SBS was born in 2012 as MSBS, the Michigan Scratch Bowling Series. Brian Regan started these
                            bowling tournaments as a competitive bowler himself and with the help of Aaron Phillips </p>
                    </div>
                </div>
                <div class="goal-prev-slide prev-goal-7">
                    <div class="goal-prev-slide-bar" style="height:20px;">
                        <div class="goal-prev-slide-bar-circle">
                            <div class="goal-7-dot goal-prev-slide-bar-circle-inner">
                            </div>
                        </div>
                        <div class="goal-7 goal-prev-slide-bar-inner ">
                        </div>
                    </div>
                    <div class="goal-prev-slide-content">
                        <a>$200,000</a>
                        <h2>PAYROLL</h2>
                        <p>SBS was born in 2012 as MSBS, the Michigan Scratch Bowling Series. Brian Regan started these
                            bowling tournaments as a competitive bowler himself and with the help of Aaron Phillips </p>
                    </div>
                </div>
            </div>
        </section>
        <section class="sec sec-half app-prev">
            <h2>OUR NEW MOBILE APP</h2>
            <p>Try the BETA release of our app!<br>Now available on the app store.</p>
            <a class="btn bkg-darkgreen text-white">VISIT APP STORE</a>
            <div class="app-prev-phone">
                <span class="app-prev-phone-n1"><i></i> <span></span></span>
                <span class="app-prev-phone-n2"><div></div></span>
                <span class="app-prev-phone-n3"><div></div></span>
                <img src="{% static 'img/SBS_Logo_Beta.png' %}" ref="Scratch Bowling Series">
            </div>
        </section>
        {% basic_stream_highlights %}
    </section>

    <!-- Right Column : ( UpcomingTournaments, BowlerOfMonth, SiteStat )-->
    <section class="col col-20 col-m-max-width m-order-3">
        {% basic_upcoming_tournaments %}
        {% basic_bowler_of_month %}
        <section class="sec sitestat">
            <div class="sitestat-half">
                <a>ACTIVE BOWLERS</a>
                <h2>{% if users_count is None %}0{% else %}{{ users_count }}{% endif %}</h2>
            </div>
            <div class="sitestat-half">
                <a>TOURNAMENTS</a>
                <h2>{% if tournaments_count is None %}0{% else %}{{ tournaments_count }}{% endif %}</h2>
            </div>
        </section>
    </section>

{% endblock %}